module.exports = {
    extends: [
        'stylelint-config-standard',
        <% if (cssProcessor === 'sass') { %>'stylelint-config-recommended-scss',<% } %>
        'stylelint-config-prettier'
    ].filter(Boolean),

    <% if (cssProcessor === 'sass') { %>
    plugins: ['stylelint-scss'<% if (usePrettier) { %>, 'stylelint-prettier'<% } %>],
    <% } else if (cssPreprocessor === 'stylus') { %>
    plugins: ['stylelint-plugin-stylus'<% if (usePrettier) { %>, 'stylelint-prettier'<% } %>],
    <% } else { %>
    plugins: [<% if (usePrettier) { %>'stylelint-prettier'<% } %>],
    <% } %>

    <% if (cssPreprocessor === 'stylus') { %>
    overrides: [
        {
            files: ['*.styl', '**/*.styl'],
            customSyntax: 'postcss-styl'
        }
    ],
    <% } %>

    <% if (cssPreprocessor === 'less') { %>
    syntax: 'less',
    <% } else if (cssPreprocessor === 'stylus') { %>
    syntax: 'stylus',
    <% } else if (cssPreprocessor === 'sass') { %>
    syntax: 'scss',
    <% } else { %>
    syntax: 'css',
    <% } %>

    rules: {
        <% if (usePrettier) { %>
        'prettier/prettier': true,
        <% } %>

        'color-no-invalid-hex': true,
        'block-no-empty': true,
        'unit-no-unknown': true,
        'declaration-block-trailing-semicolon': 'always',
        'selector-pseudo-class-no-unknown': [true, { ignorePseudoClasses: ['global'] }],

        <% if (cssProcessor === 'sass') { %>
        'scss/dollar-variable-colon-space-after': 'always',
        'scss/percent-placeholder-pattern': '^foo',
        <% } %>

        <% if (cssProcessor === 'less') { %>
        // Less 可加自定义规则，比如变量格式校验
        <% } %>

        <% if (cssProcessor === 'stylus') { %>
        // Stylus 特有规则（依据 stylelint-plugin-stylus 提供的规则）
        <% } %>
    },

    <% if (cssProcessor === 'sass') { %>
    ignoreFiles: ['**/node_modules/**'],
    <% } %>
};
